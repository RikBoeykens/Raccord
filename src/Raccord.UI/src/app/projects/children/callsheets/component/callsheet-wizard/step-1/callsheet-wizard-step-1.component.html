<div class="row">      
    <div class="col s12">
        <a routerLink="/" class="breadcrumb">Dashboard</a>
        <a routerLink="/projects" class="breadcrumb">Projects</a>
        <a routerLink="/projects/{{project.id}}" class="breadcrumb">{{project.title}}</a>
        <a routerLink="/projects/{{project.id}}/callsheets" class="breadcrumb">Callsheets</a>
        <span class="breadcrumb">{{callsheet.shootingDay.number}} - {{callsheet.shootingDay.date | date}}</span>
    </div>
</div>
<h3>Step 1 - Scenes</h3>
<div class="row">
    <div class="col s12">
        <select-entity fxFlex="33%"
            [projectId]="project.id"
            [includeTypes]="sceneType"
            (entitySelected)="addCallsheetScene($event)">
        </select-entity>
    </div>
</div>
<div class="row">
    <md-list [dragula]='"callsheet-scene-bag"' [dragulaModel]='callsheetScenes' class="drag-sort-container">
        <md-list-item 
            *ngFor="let callsheetScene of callsheetScenes"
            class="drag-element drag-delete drag-sort">
            <md-icon class=drag-handle>drag_handle</md-icon>
            <show-image *ngIf="callsheetScene.scene.primaryImage.id!=0" [image]="callsheetScene.scene.primaryImage" [listAvatar]="true"></show-image>
            <span>{{callsheetScene.scene.number}}. {{callsheetScene.scene.intExt.name}} {{callsheetScene.scene.scriptLocation.name}} {{callsheetScene.scene.dayNight.name}} - {{callsheetScene.scene.summary}} ({{callsheetScene.scene.pageLength | pagelength}})</span>
            <md-input-container fxFlex="10%" *ngIf="!draggingScene">
                <input mdInput id="scene_{{callsheetScene.id}}_pagelength" required [(ngModel)]="callsheetScene.stringPageLength" name="scene_{{callsheetScene.id}}_pagelength" (blur)="updatePageLength(callsheetScene)" />
            </md-input-container>
        </md-list-item>
    </md-list>
</div>
<div class="row">
    <span class="col s12">
        Total page length: {{getScheduledPageLength() | pagelength}}
    </span>
</div>
<div class="delete-scene drop-container drop-delete-container" [dragula]="'callsheet-scene-bag'" *ngIf="draggingScene" [dragulaModel]='deleteScenes'>
    <md-icon>delete</md-icon>
</div>